<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-7</depth>
  <persistent>0</persistent>
  <parentName>obj_ewindow</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Tiles Menu

//Inherit default create event
event_inherited()

//Currently displayed name
myname = "TILES"

//Amount of categories
mycategories = 2

//Amount of rows
myrows = 6

//Is selecting tiles enabled?
selectenabled = false

//Is mouse movement enabled?
mousemovement = false

//Is multi-tile select active?
multiselect = false

//Currently selected tile
xselection = -2
yselection = -2
wselection = 1
hselection = 1

//Normal tile option
with instance_create(x+291,y+3,obj_ewindow_button)
{
    persists = true
    myicon = spr_icon_collision
    hovertext = "TILES"
    mywindow = other
    myevent = 1
}

//Background tile option
with instance_create(x+315,y+3,obj_ewindow_button)
{
    persists = true
    myicon = spr_icon_bg
    hovertext = "BG TILES"
    mywindow = other
    myevent = 2
}

//Open regular tiles (with collision)
event_user(1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Handles tile menu controls

//Default tile camera speed
var scroll_speed = 5;

//Make tile camera faster if CTRL is pressed
scroll_speed += keyboard_check(vk_control) * 10

//Scroll tile camera left
if (mouse_x-view_xview[0] &lt; 16
and mousemovement)
or keyboard_check(vk_left)
{
    obj_editor.tilexpos -= scroll_speed
}

//Scroll tile camera right
if (mouse_x-view_xview[0] &gt; view_wview[0] - 16
and mousemovement)
or keyboard_check(vk_right)
{
    obj_editor.tilexpos += scroll_speed
}

//Scroll tile camera up
if (mouse_y-view_yview[0] &lt; ystart
and mousemovement)
or keyboard_check(vk_up)
{
    obj_editor.tileypos -= scroll_speed
}

//Scroll tile camera down
if (mouse_y-view_yview[0] &gt; view_hview[0] - 16
and mousemovement)
or keyboard_check(vk_down)
{
    obj_editor.tileypos += scroll_speed
}

//Make sure the camera stays within the tileset boundries
if obj_editor.tilexpos &gt; background_get_width(bg_tileset) - 352
    obj_editor.tilexpos = background_get_width(bg_tileset) - 352
if obj_editor.tileypos &gt; background_get_height(bg_tileset) - 136
    obj_editor.tileypos = background_get_height(bg_tileset) - 136
if obj_editor.tilexpos &lt; 0
    obj_editor.tilexpos = 0
if obj_editor.tileypos &lt; 0
    obj_editor.tileypos = 0
    
//Enable selection and mouse movement if cursor is within the tileset
if collision_rectangle(x+7,y+31,x+357,y+165,obj_editor,0,0)
{
    mousemovement = true
    selectenabled = true
}
//Otherwise disable tile selection
else
{
    selectenabled = false
    multiselect = false
    xselection = -2
    yselection = -2
}

//Update selected tile
if selectenabled
{
    //If they aren't actively selecting a tile, update the selection
    if not mouse_check_button_pressed(mb_left)
    and multiselect = false
    {
        xselection = floor(((obj_editor.x+obj_editor.tilexpos)-(x+6))/16)
        yselection = floor(((obj_editor.y+obj_editor.tileypos)-(y+30))/16)
    }
    //Choose a tile if they release left click
    else if mouse_check_button_released(mb_left)
    {
        multiselect = false
        event_user(14)
    }
    //Make multi-select active when player starts left clicking
    else
    {
        multiselect = true
    }
}

//Reset selection size
wselection = 1+max(0,floor(((obj_editor.x+obj_editor.tilexpos)-(x+6))/16)-xselection)
hselection = 1+max(0,floor(((obj_editor.y+obj_editor.tileypos)-(y+30))/16)-yselection)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="24">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Select a tile

//Play sound
audio_play_sound(snd_correct,0,0)

//Update the cursor's selection
with obj_editor
{
    selection = other.menu
    select_x = other.xselection
    select_y = other.yselection
    select_w = other.wselection
    select_h = other.hselection
}

//Close the window
event_user(0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Background Tiles
myname = "BACKGROUND TILES"
menu = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Normal Tiles
myname = "TILES"
menu = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw tile selection

//Inherit default window drawing
event_inherited()

//Draw tile box
draw_sprite_ext(spr_box_tiles,0,x+3,y+27,1,1,0,c_white,0.7)

//Draw the part of the tileset that the camera is on
draw_background_part(bg_tileset,obj_editor.tilexpos,obj_editor.tileypos,352,136,x+6,y+30)

//Highlight currently selected tiles if enabled
if selectenabled
{
    draw_set_alpha(0.5)
    draw_set_color(c_green)
    draw_rectangle(x+6+max(0,(xselection*16)-obj_editor.tilexpos),y+30+max(0,(yselection*16)-obj_editor.tileypos),x+6+min(351,((xselection+wselection)*16)-obj_editor.tilexpos-1),y+30+min(135,((yselection+hselection)*16)-obj_editor.tileypos-1),false)
    draw_set_color(c_white)
    draw_set_alpha(1)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
